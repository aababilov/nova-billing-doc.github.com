
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The nova_billing.os_amqp.amqp Module &mdash; nova-billing v2.0.0 documentation</title>
    <link rel="stylesheet" href="../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/bootstrap-dropdown.js"></script>
    <script type="text/javascript" src="../static/bootstrap-scrollspy.js"></script>
    <link rel="top" title="nova-billing v2.0.0 documentation" href="../index.html" />
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($span, minLevel) {
    var $tocList = $("<ul/>").attr('class', "dropdown-menu"),
      findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 10 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          // Add list element.
          $tocList.append($("<li/>").append($item));
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    // Start construction and return.
    findA($span);

    // Wipe out old list and patch in new one.
    return $span.empty("ul").append($tocList);
  };

  $(document).ready(function () {
    // Patch the global and local TOC's to be bootstrap-compliant.
    patchToc($("span.globaltoc"), 1);
    patchToc($("span.localtoc"), 2);

    // Activate.
    $('#topbar').dropdown();
  });
}());
</script>

  </head>
  <body>
  <div class="topbar" data-scrollspy="scrollspy" >
    <div class="topbar-inner">
      <div class="container">
        <a class="brand" href="../index.html">nova-billing v2.0.0 documentation</a>
        <ul class="nav">
          
            <li class="dropdown" data-dropdown="dropdown">
  <a href="../index.html"
     class="dropdown-toggle">Site</a>
  <span class="globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What&#8217;s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restapi.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>
</span>
</li>
            
          
          
            
          
          
            
          
        </ul>
        <ul class="nav secondary-nav">
          
            
<form class="pull-left" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </ul>
      </div>
    </div>
  </div>

<div class="container">
   
  <div class="section" id="module-nova_billing.os_amqp.amqp">
<span id="the-nova-billing-os-amqp-amqp-module"></span><h1>The nova_billing.os_amqp.amqp Module<a class="headerlink" href="#module-nova_billing.os_amqp.amqp" title="Permalink to this headline">¶</a></h1>
<p>OpenStack AMQP listener</p>
<dl class="class">
<dt id="nova_billing.os_amqp.amqp.Service">
<em class="property">class </em><tt class="descclassname">nova_billing.os_amqp.amqp.</tt><tt class="descname">Service</tt><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.consume">
<tt class="descname">consume</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Get messages in an infinite loop. This is the main function of service&#8217;s green thread.</p>
</dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.get_event_datetime">
<tt class="descname">get_event_datetime</tt><big>(</big><em>body</em><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.get_event_datetime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nova_billing.os_amqp.amqp.Service.heart_request_interceptors">
<tt class="descname">heart_request_interceptors</tt><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.heart_request_interceptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Class of AMQP listening service.
Usually this service starts at the beginning of the billing daemon
and starts listening immediately. In case of connection errors
reconnection attempts will be made periodically.</p>
<p>The service listens for <tt class="docutils literal"><span class="pre">compute.#</span></tt> routing keys.</p>
</dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.process_event">
<tt class="descname">process_event</tt><big>(</big><em>body</em>, <em>message</em><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.process_event" title="Permalink to this definition">¶</a></dt>
<dd><p>This function analyzes <tt class="docutils literal"><span class="pre">body</span></tt> and calls
heart_request_interceptors.</p>
</dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.process_message">
<tt class="descname">process_message</tt><big>(</big><em>body</em>, <em>message</em><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.process_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.reconnect">
<tt class="descname">reconnect</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.reconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nova_billing.os_amqp.amqp.Service.wait">
<tt class="descname">wait</tt><big>(</big><big>)</big><a class="headerlink" href="#nova_billing.os_amqp.amqp.Service.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>
        &copy; Copyright 2012, Alessio Ababilov (Grid Dynamics Openstack Core Team).<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>